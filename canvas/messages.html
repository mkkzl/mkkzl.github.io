<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JSON Tester</title>
</head>
<body>
<h1>JSON Tester</h1>
<canvas id="textcanvas" width="2000" height="100"></canvas>
<canvas id="canvas" width="2000" height="2000"></canvas>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="moment.js">

</script>
<script type="text/javascript">
  $.getJSON("message_1.json", function(json){
    var messages= json.messages
    var length= json.messages.length;
    var dict= {};
    var i= 0;
    var n= 0;
    var times= [];
    while (i<= length){


        if (typeof json.messages[i] == 'undefined'){console.log("undefined")}else{
          var time= new Date(json.messages[i].timestamp_ms);
          times.push(time.toLocaleDateString());
        }

      i = i+1;
    }



    //insert date for every day from 9/8 to 6/29
  /*  Date.prototype.addDays = function(days) {
    var dat = new Date(this.valueOf())
    dat.setDate(dat.getDate() + days);
    return dat;
}

function getDates(startDate, stopDate) {
   var dateArray = new Array();
   var currentDate = startDate;
   while (currentDate <= stopDate) {
     dateArray.push(currentDate)
     currentDate = currentDate.addDays(1);
   }
   return dateArray;
 }

var dateArray = getDates(new Date(), (new Date()).addDays(2));
for (i = 0; i < dateArray.length; i ++ ) {
 alert (dateArray[i]);
}*/





    var j= 0;
    for (j; j<times.length; j++){
      if (times[j] in dict){dict[times[j]]=dict[times[j]]+1}
      else{dict[times[j]]=1;}

    }
    var c = document.getElementById("canvas");
    var ctx = c.getContext("2d");
    var tc = document.getElementById("canvas");
    var tctx = tc.getContext("2d");
    ctx.font = "50px serif";
    ctx.fillStyle= "red";

    var x=0;
    const entries = Object.entries(dict);
    for (const [date, count] of entries){
      if (count <=100){
        ctx.fillStyle= "blue";
      }  if (count > 100){
          ctx.fillStyle= "green";
        }  if (count > 200){
            ctx.fillStyle= "orange";
          }  if (count > 500){
              ctx.fillStyle= "red";
            }  if (count > 750){
                ctx.fillStyle= "purple";
                  console.log(date)
              }  if (count > 1000){
                  ctx.fillStyle= "yellow";

                }
      ctx.fillRect(x, 25, 10, count);


      x= x+20;
    }
console.log(Object.keys(dict))

  });

</script>
</body>
</html>
